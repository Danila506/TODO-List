(()=>{"use strict";const t=document.getElementById("newTaskForm"),e=document.getElementById("newTaskInput"),n=document.getElementById("tasks"),a="todoTasks";function i(){localStorage.setItem(a,JSON.stringify(s))}function d(t){const e=document.createElement("div");e.setAttribute("data-task-id",t.id),e.classList.add("bg-[#101826]","text-white","rounded-xl","py-2","px-4","mb-2","flex","items-center","justify-between","cursor-pointer");const n=document.createElement("span");n.textContent=t.text,t.completed&&n.classList.add("line-through","opacity-50"),e.addEventListener("click",(function(){var n;n=t.id,s=s.map((t=>t.id===n?{...t,completed:!t.completed}:t)),i(),o(s),e.classList.add("animate__animated","animate__flipInX"),e.addEventListener("animationend",(()=>{e.classList.remove("animate__flipInX")}))})),e.addEventListener("keydown",(function(t){" "===t.key&&t.preventDefault()}));const a=document.createElement("div");a.classList.add("flex","gap-2");const d=document.createElement("button");d.textContent="EDIT",d.classList.add("bg-[linear-gradient(to_right,#ec4899,#8b5cf6)]","text-[#ec4899]","text-transparent","bg-clip-text","cursor-pointer","font-bold","transition","duration-300","hover:opacity-80");const c=document.createElement("button");return c.textContent="DELETE",c.classList.add("text-[#dc143c]","font-bold","cursor-pointer","transition","duration-300","hover:opacity-80"),d.addEventListener("click",(function(a){a.stopPropagation(),e.classList.add("animate__animated","animate__pulse");const d=document.createElement("input");d.type="text",d.value=t.text,d.classList.add("bg-transparent","outline-none","text-white","flex-1"),e.replaceChild(d,n),d.focus(),d.setSelectionRange(0,d.value.length);let c=!1;const r=()=>{if(c)return;c=!0;const a=d.value.trim();""!==a&&(t.text=a,n.textContent=a),e.replaceChild(n,d),i(),o(s),e.classList.remove("animate__pulse")};d.addEventListener("keydown",(function(t){"Enter"===t.key&&r(),"Escape"===t.key&&e.replaceChild(n,d)," "===t.key&&t.stopPropagation()})),d.addEventListener("blur",(function(){r()}))})),c.addEventListener("click",(function(e){e.stopPropagation(),function(t){const e=document.querySelector(`[data-task-id="${t}"]`);e&&(e.classList.add("animate__animated","animate__fadeOutUp"),e.addEventListener("animationend",(()=>{s=s.filter((e=>e.id!==t)),i(),o(s)})))}(t.id)})),e.appendChild(n),a.appendChild(d),a.appendChild(c),e.appendChild(a),e}function o(t){n.innerHTML="",t.forEach((t=>{const e=d(t);n.appendChild(e)}))}let s=function(){const t=localStorage.getItem(a);return t?JSON.parse(t):[]}();o(s),t.addEventListener("submit",(function(t){t.preventDefault();const a=e.value.trim();""!==a&&(function(t){const e={id:Date.now().toString(),text:t,completed:!1};s.push(e),i();const a=d(e);a.classList.add("animate__animated","animate__fadeInDown"),n.appendChild(a)}(a),e.value="")}))})();